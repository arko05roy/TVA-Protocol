{"version":3,"sources":["../../src/types/index.ts","../../src/rpc/client.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * TVA Protocol Type Definitions\n *\n * These types define the core abstractions for the TVA Protocol,\n * bridging EVM and Stellar/Soroban concepts.\n */\n\n// ============================================================================\n// Network Configuration\n// ============================================================================\n\nexport type NetworkType = 'testnet' | 'mainnet' | 'local';\n\nexport interface NetworkConfig {\n  /** Network identifier */\n  type: NetworkType;\n  /** TVA RPC endpoint URL */\n  rpcUrl: string;\n  /** Stellar Horizon URL */\n  horizonUrl: string;\n  /** Stellar Soroban RPC URL */\n  sorobanRpcUrl: string;\n  /** Network passphrase for Stellar */\n  networkPassphrase: string;\n  /** Chain ID for EVM compatibility */\n  chainId: number;\n  /** Native currency symbol (XLM) */\n  nativeCurrency: {\n    name: string;\n    symbol: string;\n    decimals: number;\n  };\n}\n\n/**\n * TVA Chain ID: \"TVA\\0\" = 0x54564100 = 1414676736\n */\nexport const TVA_CHAIN_ID = 1414676736;\n\nexport const NETWORKS: Record<NetworkType, NetworkConfig> = {\n  testnet: {\n    type: 'testnet',\n    rpcUrl: 'http://localhost:8545', // TVA RPC server\n    horizonUrl: 'https://horizon-testnet.stellar.org',\n    sorobanRpcUrl: 'https://soroban-testnet.stellar.org',\n    networkPassphrase: 'Test SDF Network ; September 2015',\n    chainId: TVA_CHAIN_ID,\n    nativeCurrency: {\n      name: 'Stellar Lumens',\n      symbol: 'XLM',\n      decimals: 7,\n    },\n  },\n  mainnet: {\n    type: 'mainnet',\n    rpcUrl: 'http://localhost:8545', // TVA RPC server (production URL TBD)\n    horizonUrl: 'https://horizon.stellar.org',\n    sorobanRpcUrl: 'https://soroban.stellar.org',\n    networkPassphrase: 'Public Global Stellar Network ; September 2015',\n    chainId: TVA_CHAIN_ID,\n    nativeCurrency: {\n      name: 'Stellar Lumens',\n      symbol: 'XLM',\n      decimals: 7,\n    },\n  },\n  local: {\n    type: 'local',\n    rpcUrl: 'http://localhost:8545',\n    horizonUrl: 'http://localhost:8000',\n    sorobanRpcUrl: 'http://localhost:8001',\n    networkPassphrase: 'Standalone Network ; February 2017',\n    chainId: TVA_CHAIN_ID,\n    nativeCurrency: {\n      name: 'Stellar Lumens',\n      symbol: 'XLM',\n      decimals: 7,\n    },\n  },\n};\n\n// ============================================================================\n// Address Types\n// ============================================================================\n\n/** 20-byte EVM-compatible address (hex string with 0x prefix) */\nexport type EvmAddress = `0x${string}`;\n\n/** 56-character Stellar G-address (Ed25519 public key) */\nexport type StellarAddress = `G${string}`;\n\n/** Soroban contract ID (C-address, 56 characters) */\nexport type SorobanContractId = `C${string}`;\n\n/** Generic address that could be EVM or Stellar format */\nexport type Address = EvmAddress | StellarAddress | SorobanContractId;\n\n/** Mapping between EVM and Stellar addresses */\nexport interface AddressMapping {\n  evmAddress: EvmAddress;\n  stellarAddress: StellarAddress;\n  registeredAt: number; // ledger sequence\n}\n\n// ============================================================================\n// Transaction Types\n// ============================================================================\n\nexport interface EvmTransaction {\n  from: EvmAddress;\n  to?: EvmAddress; // undefined for contract deployment\n  value: bigint;\n  data: string;\n  nonce: number;\n  gasLimit: bigint;\n  gasPrice: bigint;\n  chainId: number;\n}\n\nexport interface EvmTransactionReceipt {\n  transactionHash: string;\n  transactionIndex: number;\n  blockHash: string;\n  blockNumber: number;\n  from: EvmAddress;\n  to: EvmAddress | null;\n  contractAddress: EvmAddress | null;\n  cumulativeGasUsed: bigint;\n  gasUsed: bigint;\n  status: 0 | 1;\n  logs: EvmLog[];\n}\n\nexport interface EvmLog {\n  address: EvmAddress;\n  topics: string[];\n  data: string;\n  blockNumber: number;\n  transactionHash: string;\n  transactionIndex: number;\n  blockHash: string;\n  logIndex: number;\n  removed: boolean;\n}\n\nexport interface EvmBlock {\n  number: number;\n  hash: string;\n  parentHash: string;\n  timestamp: number;\n  miner: EvmAddress;\n  difficulty: bigint;\n  totalDifficulty: bigint;\n  gasLimit: bigint;\n  gasUsed: bigint;\n  transactions: string[];\n  transactionsRoot: string;\n  stateRoot: string;\n  receiptsRoot: string;\n  logsBloom: string;\n  nonce: string;\n  extraData: string;\n}\n\n// ============================================================================\n// Compilation Types\n// ============================================================================\n\nexport interface CompilerInput {\n  /** Solidity source code */\n  source: string;\n  /** Contract file name */\n  fileName: string;\n  /** Compiler optimization settings */\n  optimization?: {\n    enabled: boolean;\n    runs?: number;\n  };\n}\n\nexport interface CompilerOutput {\n  /** Compiled WASM binary (base64 encoded) */\n  wasm: string;\n  /** Contract ABI in JSON format */\n  abi: ContractABI;\n  /** Soroban contract spec entries */\n  spec: SorobanSpec[];\n  /** Compilation warnings */\n  warnings: string[];\n  /** Source map for debugging */\n  sourceMap?: string;\n}\n\nexport interface ContractABI {\n  /** Contract name */\n  name: string;\n  /** ABI entries */\n  functions: ABIFunction[];\n  events: ABIEvent[];\n  errors: ABIError[];\n}\n\nexport interface ABIFunction {\n  name: string;\n  inputs: ABIParameter[];\n  outputs: ABIParameter[];\n  stateMutability: 'pure' | 'view' | 'nonpayable' | 'payable';\n  type: 'function' | 'constructor' | 'fallback' | 'receive';\n}\n\nexport interface ABIEvent {\n  name: string;\n  inputs: ABIEventParameter[];\n  anonymous: boolean;\n}\n\nexport interface ABIParameter {\n  name: string;\n  type: string;\n  internalType?: string;\n  components?: ABIParameter[];\n}\n\nexport interface ABIEventParameter extends ABIParameter {\n  indexed: boolean;\n}\n\nexport interface ABIError {\n  name: string;\n  inputs: ABIParameter[];\n}\n\nexport interface SorobanSpec {\n  type: 'function' | 'struct' | 'union' | 'enum' | 'error';\n  name: string;\n  doc?: string;\n  inputs?: { name: string; type: ScValType }[];\n  outputs?: ScValType[];\n}\n\n// ============================================================================\n// Soroban-Specific Types\n// ============================================================================\n\nexport type ScValType =\n  | 'bool'\n  | 'void'\n  | 'error'\n  | 'u32'\n  | 'i32'\n  | 'u64'\n  | 'i64'\n  | 'timepoint'\n  | 'duration'\n  | 'u128'\n  | 'i128'\n  | 'u256'\n  | 'i256'\n  | 'bytes'\n  | 'string'\n  | 'symbol'\n  | 'address'\n  | { vec: ScValType }\n  | { map: { key: ScValType; value: ScValType } }\n  | { option: ScValType }\n  | { result: { ok: ScValType; err: ScValType } }\n  | { tuple: ScValType[] }\n  | { bytesN: number }\n  | { struct: string }\n  | { union: string }\n  | { enum: string };\n\nexport type StorageType = 'temporary' | 'instance' | 'persistent';\n\nexport interface StorageEntry {\n  key: string;\n  value: unknown;\n  type: StorageType;\n  ttl: number; // ledger sequence when entry expires\n}\n\n// ============================================================================\n// Contract Interaction Types\n// ============================================================================\n\nexport interface DeploymentConfig {\n  /** Compiled WASM binary (base64) */\n  wasm: string;\n  /** Constructor arguments */\n  constructorArgs?: unknown[];\n  /** Initial salt for address derivation */\n  salt?: string;\n  /** Network to deploy to */\n  network: NetworkType;\n}\n\nexport interface DeploymentResult {\n  /** Soroban contract ID */\n  contractId: SorobanContractId;\n  /** EVM-compatible contract address */\n  evmAddress: EvmAddress;\n  /** Deployment transaction hash (Stellar format) */\n  stellarTxHash: string;\n  /** Deployment transaction hash (EVM format) */\n  evmTxHash: string;\n  /** Ledger sequence of deployment */\n  ledgerSequence: number;\n}\n\nexport interface ContractCallConfig {\n  /** Contract address (EVM or Soroban format) */\n  contractAddress: Address;\n  /** Function name to call */\n  functionName: string;\n  /** Function arguments */\n  args?: unknown[];\n  /** Caller address */\n  from?: Address;\n}\n\nexport interface ContractCallResult<T = unknown> {\n  /** Return value from the contract */\n  result: T;\n  /** Gas/resource consumption */\n  gasUsed: bigint;\n  /** Events emitted during call */\n  events: EvmLog[];\n  /** Whether the call was a simulation (view) or on-chain */\n  simulated: boolean;\n}\n\n// ============================================================================\n// Wallet Types\n// ============================================================================\n\nexport interface KeyPair {\n  /** secp256k1 private key for EVM signing */\n  evmPrivateKey: string;\n  /** secp256k1 public key (uncompressed, 65 bytes) */\n  evmPublicKey: string;\n  /** Ed25519 secret key for Stellar signing */\n  stellarSecretKey: string;\n  /** Ed25519 public key for Stellar */\n  stellarPublicKey: string;\n}\n\nexport interface Account {\n  /** EVM-format address */\n  evmAddress: EvmAddress;\n  /** Stellar G-address */\n  stellarAddress: StellarAddress;\n  /** Whether this account is registered in the AccountRegistry */\n  isRegistered: boolean;\n  /** Account sequence number (Stellar) */\n  sequenceNumber?: string;\n  /** Account nonce (EVM) */\n  nonce?: number;\n}\n\nexport interface Balance {\n  /** Native XLM balance (in stroops, 1 XLM = 10^7 stroops) */\n  xlm: bigint;\n  /** Native XLM balance formatted (7 decimals) */\n  xlmFormatted: string;\n  /** Token balances keyed by contract address */\n  tokens: Map<Address, TokenBalance>;\n}\n\nexport interface TokenBalance {\n  /** Token contract address */\n  address: Address;\n  /** Token symbol */\n  symbol: string;\n  /** Token decimals */\n  decimals: number;\n  /** Raw balance */\n  balance: bigint;\n  /** Formatted balance */\n  balanceFormatted: string;\n}\n\n// ============================================================================\n// Error Types\n// ============================================================================\n\nexport class TVAError extends Error {\n  constructor(\n    message: string,\n    public code: TVAErrorCode,\n    public details?: Record<string, unknown>\n  ) {\n    super(message);\n    this.name = 'TVAError';\n  }\n}\n\nexport enum TVAErrorCode {\n  // Compilation errors (1xxx)\n  COMPILATION_FAILED = 1001,\n  SOLANG_NOT_FOUND = 1002,\n  INVALID_SOURCE = 1003,\n\n  // Network errors (2xxx)\n  NETWORK_ERROR = 2001,\n  RPC_ERROR = 2002,\n  TIMEOUT = 2003,\n\n  // Transaction errors (3xxx)\n  TRANSACTION_FAILED = 3001,\n  INSUFFICIENT_BALANCE = 3002,\n  INVALID_NONCE = 3003,\n  GAS_ESTIMATION_FAILED = 3004,\n\n  // Contract errors (4xxx)\n  CONTRACT_NOT_FOUND = 4001,\n  CONTRACT_REVERT = 4002,\n  INVALID_ARGUMENTS = 4003,\n\n  // Account errors (5xxx)\n  ACCOUNT_NOT_FOUND = 5001,\n  ACCOUNT_NOT_REGISTERED = 5002,\n  INVALID_SIGNATURE = 5003,\n\n  // Storage errors (6xxx)\n  STATE_ARCHIVED = 6001,\n  TTL_EXPIRED = 6002,\n  RESTORATION_FAILED = 6003,\n}\n","/**\n * TVA Protocol RPC Client\n *\n * Communicates with the TVA RPC server which translates\n * Ethereum JSON-RPC calls to Stellar/Soroban operations.\n */\n\nimport type {\n  EvmAddress,\n  EvmTransactionReceipt,\n  EvmBlock,\n  EvmLog,\n  NetworkType,\n  NetworkConfig,\n} from '../types/index.js';\nimport { NETWORKS, TVAError, TVAErrorCode } from '../types/index.js';\n\n/**\n * JSON-RPC request structure\n */\ninterface JsonRpcRequest {\n  jsonrpc: '2.0';\n  id: number;\n  method: string;\n  params: unknown[];\n}\n\n/**\n * JSON-RPC response structure\n */\ninterface JsonRpcResponse<T = unknown> {\n  jsonrpc: '2.0';\n  id: number;\n  result?: T;\n  error?: {\n    code: number;\n    message: string;\n    data?: unknown;\n  };\n}\n\n/**\n * RPC Client options\n */\nexport interface RpcClientOptions {\n  /** RPC endpoint URL */\n  url?: string;\n  /** Network type (uses pre-configured URL if not providing custom URL) */\n  network?: NetworkType;\n  /** Request timeout in milliseconds */\n  timeout?: number;\n  /** Custom headers for requests */\n  headers?: Record<string, string>;\n}\n\n/**\n * TVA RPC Client\n *\n * Provides type-safe access to the TVA JSON-RPC API.\n */\nexport class RpcClient {\n  private url: string;\n  private timeout: number;\n  private headers: Record<string, string>;\n  private requestId: number = 0;\n  public readonly network: NetworkConfig;\n\n  constructor(options: RpcClientOptions = {}) {\n    const networkType = options.network || 'testnet';\n    this.network = NETWORKS[networkType];\n    this.url = options.url || this.network.rpcUrl;\n    this.timeout = options.timeout || 30000;\n    this.headers = {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    };\n  }\n\n  /**\n   * Makes a JSON-RPC request to the TVA RPC server\n   */\n  private async request<T>(method: string, params: unknown[] = []): Promise<T> {\n    const id = ++this.requestId;\n\n    const body: JsonRpcRequest = {\n      jsonrpc: '2.0',\n      id,\n      method,\n      params,\n    };\n\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n\n    try {\n      const response = await fetch(this.url, {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify(body),\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new TVAError(\n          `HTTP error: ${response.status} ${response.statusText}`,\n          TVAErrorCode.RPC_ERROR,\n          { status: response.status }\n        );\n      }\n\n      const json = (await response.json()) as JsonRpcResponse<T>;\n\n      if (json.error) {\n        throw new TVAError(\n          json.error.message,\n          TVAErrorCode.RPC_ERROR,\n          { code: json.error.code, data: json.error.data }\n        );\n      }\n\n      return json.result as T;\n    } catch (error) {\n      clearTimeout(timeoutId);\n\n      if (error instanceof TVAError) {\n        throw error;\n      }\n\n      if ((error as Error).name === 'AbortError') {\n        throw new TVAError(\n          'Request timeout',\n          TVAErrorCode.TIMEOUT,\n          { timeout: this.timeout }\n        );\n      }\n\n      throw new TVAError(\n        `Network error: ${(error as Error).message}`,\n        TVAErrorCode.NETWORK_ERROR,\n        { originalError: error }\n      );\n    }\n  }\n\n  // ============================================================================\n  // Chain Methods\n  // ============================================================================\n\n  /**\n   * Returns the chain ID of the TVA network\n   */\n  async getChainId(): Promise<number> {\n    const result = await this.request<string>('eth_chainId');\n    return parseInt(result, 16);\n  }\n\n  /**\n   * Returns the network version\n   */\n  async getNetworkVersion(): Promise<string> {\n    return this.request<string>('net_version');\n  }\n\n  /**\n   * Returns the client version\n   */\n  async getClientVersion(): Promise<string> {\n    return this.request<string>('web3_clientVersion');\n  }\n\n  /**\n   * Returns the current gas price in wei\n   */\n  async getGasPrice(): Promise<bigint> {\n    const result = await this.request<string>('eth_gasPrice');\n    return BigInt(result);\n  }\n\n  // ============================================================================\n  // Block Methods\n  // ============================================================================\n\n  /**\n   * Returns the current block number (Stellar ledger sequence)\n   */\n  async getBlockNumber(): Promise<number> {\n    const result = await this.request<string>('eth_blockNumber');\n    return parseInt(result, 16);\n  }\n\n  /**\n   * Returns a block by number\n   */\n  async getBlockByNumber(\n    blockNumber: number | 'latest' | 'earliest' | 'pending',\n    includeTransactions: boolean = false\n  ): Promise<EvmBlock | null> {\n    const blockParam = typeof blockNumber === 'number'\n      ? `0x${blockNumber.toString(16)}`\n      : blockNumber;\n\n    return this.request<EvmBlock | null>('eth_getBlockByNumber', [\n      blockParam,\n      includeTransactions,\n    ]);\n  }\n\n  /**\n   * Returns a block by hash\n   */\n  async getBlockByHash(\n    blockHash: string,\n    includeTransactions: boolean = false\n  ): Promise<EvmBlock | null> {\n    return this.request<EvmBlock | null>('eth_getBlockByHash', [\n      blockHash,\n      includeTransactions,\n    ]);\n  }\n\n  // ============================================================================\n  // Account Methods\n  // ============================================================================\n\n  /**\n   * Returns the balance of an account in wei (XLM converted to 18 decimals)\n   */\n  async getBalance(\n    address: EvmAddress,\n    blockNumber: number | 'latest' = 'latest'\n  ): Promise<bigint> {\n    const blockParam = typeof blockNumber === 'number'\n      ? `0x${blockNumber.toString(16)}`\n      : blockNumber;\n\n    const result = await this.request<string>('eth_getBalance', [\n      address,\n      blockParam,\n    ]);\n    return BigInt(result);\n  }\n\n  /**\n   * Returns the transaction count (nonce) of an account\n   */\n  async getTransactionCount(\n    address: EvmAddress,\n    blockNumber: number | 'latest' | 'pending' = 'latest'\n  ): Promise<number> {\n    const blockParam = typeof blockNumber === 'number'\n      ? `0x${blockNumber.toString(16)}`\n      : blockNumber;\n\n    const result = await this.request<string>('eth_getTransactionCount', [\n      address,\n      blockParam,\n    ]);\n    return parseInt(result, 16);\n  }\n\n  /**\n   * Returns the code at a given address (contract WASM hash)\n   */\n  async getCode(\n    address: EvmAddress,\n    blockNumber: number | 'latest' = 'latest'\n  ): Promise<string> {\n    const blockParam = typeof blockNumber === 'number'\n      ? `0x${blockNumber.toString(16)}`\n      : blockNumber;\n\n    return this.request<string>('eth_getCode', [address, blockParam]);\n  }\n\n  // ============================================================================\n  // Transaction Methods\n  // ============================================================================\n\n  /**\n   * Sends a signed raw transaction\n   */\n  async sendRawTransaction(signedTransaction: string): Promise<string> {\n    return this.request<string>('eth_sendRawTransaction', [signedTransaction]);\n  }\n\n  /**\n   * Returns a transaction by hash\n   */\n  async getTransactionByHash(txHash: string): Promise<any | null> {\n    return this.request<any>('eth_getTransactionByHash', [txHash]);\n  }\n\n  /**\n   * Returns a transaction receipt\n   */\n  async getTransactionReceipt(txHash: string): Promise<EvmTransactionReceipt | null> {\n    return this.request<EvmTransactionReceipt | null>('eth_getTransactionReceipt', [txHash]);\n  }\n\n  /**\n   * Executes a call without creating a transaction (read-only)\n   */\n  async call(\n    transaction: {\n      from?: EvmAddress;\n      to: EvmAddress;\n      data?: string;\n      value?: string;\n      gas?: string;\n      gasPrice?: string;\n    },\n    blockNumber: number | 'latest' = 'latest'\n  ): Promise<string> {\n    const blockParam = typeof blockNumber === 'number'\n      ? `0x${blockNumber.toString(16)}`\n      : blockNumber;\n\n    return this.request<string>('eth_call', [transaction, blockParam]);\n  }\n\n  /**\n   * Estimates gas for a transaction\n   */\n  async estimateGas(transaction: {\n    from?: EvmAddress;\n    to?: EvmAddress;\n    data?: string;\n    value?: string;\n  }): Promise<bigint> {\n    const result = await this.request<string>('eth_estimateGas', [transaction]);\n    return BigInt(result);\n  }\n\n  // ============================================================================\n  // Log Methods\n  // ============================================================================\n\n  /**\n   * Returns logs matching the given filter\n   */\n  async getLogs(filter: {\n    fromBlock?: number | 'latest' | 'earliest';\n    toBlock?: number | 'latest' | 'earliest';\n    address?: EvmAddress | EvmAddress[];\n    topics?: (string | string[] | null)[];\n    blockHash?: string;\n  }): Promise<EvmLog[]> {\n    const formattedFilter: Record<string, unknown> = {};\n\n    if (filter.fromBlock !== undefined) {\n      formattedFilter.fromBlock = typeof filter.fromBlock === 'number'\n        ? `0x${filter.fromBlock.toString(16)}`\n        : filter.fromBlock;\n    }\n\n    if (filter.toBlock !== undefined) {\n      formattedFilter.toBlock = typeof filter.toBlock === 'number'\n        ? `0x${filter.toBlock.toString(16)}`\n        : filter.toBlock;\n    }\n\n    if (filter.address) {\n      formattedFilter.address = filter.address;\n    }\n\n    if (filter.topics) {\n      formattedFilter.topics = filter.topics;\n    }\n\n    if (filter.blockHash) {\n      formattedFilter.blockHash = filter.blockHash;\n    }\n\n    return this.request<EvmLog[]>('eth_getLogs', [formattedFilter]);\n  }\n\n  // ============================================================================\n  // Utility Methods\n  // ============================================================================\n\n  /**\n   * Computes keccak256 hash\n   */\n  async sha3(data: string): Promise<string> {\n    return this.request<string>('web3_sha3', [data]);\n  }\n\n  /**\n   * Waits for a transaction to be mined\n   */\n  async waitForTransaction(\n    txHash: string,\n    confirmations: number = 1,\n    timeout: number = 60000\n  ): Promise<EvmTransactionReceipt> {\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < timeout) {\n      const receipt = await this.getTransactionReceipt(txHash);\n\n      if (receipt) {\n        // Check confirmations\n        const currentBlock = await this.getBlockNumber();\n        const txBlock = receipt.blockNumber;\n        const currentConfirmations = currentBlock - txBlock + 1;\n\n        if (currentConfirmations >= confirmations) {\n          return receipt;\n        }\n      }\n\n      // Wait before polling again (Stellar has ~5s block time)\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n    }\n\n    throw new TVAError(\n      `Transaction ${txHash} was not mined within ${timeout}ms`,\n      TVAErrorCode.TIMEOUT,\n      { txHash, timeout }\n    );\n  }\n\n  /**\n   * Checks if the RPC server is healthy\n   */\n  async isHealthy(): Promise<boolean> {\n    try {\n      await this.getChainId();\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n\n/**\n * Creates an RPC client for the specified network\n */\nexport function createRpcClient(\n  networkOrUrl: NetworkType | string = 'testnet'\n): RpcClient {\n  if (networkOrUrl.startsWith('http')) {\n    return new RpcClient({ url: networkOrUrl });\n  }\n  return new RpcClient({ network: networkOrUrl as NetworkType });\n}\n"]}