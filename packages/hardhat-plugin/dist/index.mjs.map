{"version":3,"sources":["../src/config/index.ts","../src/artifacts/index.ts","../src/tasks/compile.ts","../src/tasks/deploy.ts","../src/index.ts"],"names":["path","fs","subtask","path3","fs3","task","TVAContract","getNetworkType","deriveKeyPairFromEvmPrivateKey","deriveKeyPairFromMnemonic","TVASigner"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * TVA Hardhat Plugin Configuration\n */\n\nexport * from './types.js';\n\nimport type { TVAConfig } from './types.js';\n\n/**\n * Default TVA configuration values\n */\nexport const defaultTVAConfig: Required<TVAConfig> = {\n  solangPath: '',\n  optimizationLevel: 2,\n  defaultNetwork: 'testnet',\n  artifactsDir: 'artifacts/tva',\n  autoVerify: false,\n  importPaths: [],\n};\n\n/**\n * Merges user config with defaults\n */\nexport function resolveTVAConfig(userConfig?: TVAConfig): Required<TVAConfig> {\n  return {\n    ...defaultTVAConfig,\n    ...userConfig,\n  };\n}\n\n/**\n * Pre-configured TVA network settings\n */\nexport const tvaNetworks = {\n  tvaTestnet: {\n    url: 'https://rpc.testnet.tva-protocol.io',\n    horizonUrl: 'https://horizon-testnet.stellar.org',\n    sorobanRpcUrl: 'https://soroban-testnet.stellar.org',\n    networkPassphrase: 'Test SDF Network ; September 2015',\n    chainId: 0x544541,\n  },\n  tvaMainnet: {\n    url: 'https://rpc.tva-protocol.io',\n    horizonUrl: 'https://horizon.stellar.org',\n    sorobanRpcUrl: 'https://soroban.stellar.org',\n    networkPassphrase: 'Public Global Stellar Network ; September 2015',\n    chainId: 0x545641,\n  },\n  tvaLocal: {\n    url: 'http://localhost:8545',\n    horizonUrl: 'http://localhost:8000',\n    sorobanRpcUrl: 'http://localhost:8001',\n    networkPassphrase: 'Standalone Network ; February 2017',\n    chainId: 0x545600,\n  },\n};\n","/**\n * TVA Hardhat Artifact Management\n *\n * Handles loading and managing compiled contract artifacts.\n */\n\nimport * as path from 'path';\nimport * as fs from 'fs/promises';\nimport type { HardhatRuntimeEnvironment } from 'hardhat/types';\nimport type { TVACompiledContract } from '../config/types.js';\n\n/**\n * Artifact cache to avoid repeated file reads\n */\nconst artifactCache = new Map<string, TVACompiledContract>();\n\n/**\n * Loads a compiled contract artifact by name\n */\nexport async function loadArtifact(\n  name: string,\n  hre: HardhatRuntimeEnvironment\n): Promise<TVACompiledContract> {\n  // Check cache first\n  const cacheKey = `${hre.config.paths.root}:${name}`;\n  const cached = artifactCache.get(cacheKey);\n  if (cached) {\n    return cached;\n  }\n\n  const artifactsDir = path.join(\n    hre.config.paths.root,\n    hre.config.tva.artifactsDir\n  );\n\n  const contractDir = path.join(artifactsDir, name);\n  const artifactPath = path.join(contractDir, `${name}.json`);\n  const wasmPath = path.join(contractDir, `${name}.wasm`);\n\n  // Check if artifact exists\n  try {\n    await fs.access(artifactPath);\n  } catch {\n    throw new Error(\n      `Contract artifact not found for \"${name}\". ` +\n      `Make sure the contract has been compiled with \"npx hardhat tva:compile\".`\n    );\n  }\n\n  // Load artifact JSON\n  const artifactContent = await fs.readFile(artifactPath, 'utf-8');\n  const artifact = JSON.parse(artifactContent);\n\n  // Load WASM binary\n  const wasm = await fs.readFile(wasmPath);\n\n  const compiledContract: TVACompiledContract = {\n    name: artifact.contractName,\n    sourcePath: artifact.sourceName,\n    wasmPath,\n    wasm: wasm.toString('base64'),\n    abi: artifact.abi,\n    spec: artifact.spec || [],\n  };\n\n  // Cache the artifact\n  artifactCache.set(cacheKey, compiledContract);\n\n  return compiledContract;\n}\n\n/**\n * Lists all available contract artifacts\n */\nexport async function listArtifacts(\n  hre: HardhatRuntimeEnvironment\n): Promise<string[]> {\n  const artifactsDir = path.join(\n    hre.config.paths.root,\n    hre.config.tva.artifactsDir\n  );\n\n  try {\n    const entries = await fs.readdir(artifactsDir, { withFileTypes: true });\n    return entries\n      .filter((entry) => entry.isDirectory())\n      .map((entry) => entry.name);\n  } catch {\n    return [];\n  }\n}\n\n/**\n * Checks if an artifact exists for a contract\n */\nexport async function artifactExists(\n  name: string,\n  hre: HardhatRuntimeEnvironment\n): Promise<boolean> {\n  const artifactsDir = path.join(\n    hre.config.paths.root,\n    hre.config.tva.artifactsDir\n  );\n\n  const artifactPath = path.join(artifactsDir, name, `${name}.json`);\n\n  try {\n    await fs.access(artifactPath);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Clears the artifact cache\n */\nexport function clearArtifactCache(): void {\n  artifactCache.clear();\n}\n\n/**\n * Gets the path to the artifacts directory\n */\nexport function getArtifactsDir(hre: HardhatRuntimeEnvironment): string {\n  return path.join(hre.config.paths.root, hre.config.tva.artifactsDir);\n}\n\n/**\n * Saves an artifact to disk\n */\nexport async function saveArtifact(\n  contract: TVACompiledContract,\n  hre: HardhatRuntimeEnvironment\n): Promise<void> {\n  const artifactsDir = getArtifactsDir(hre);\n  const contractDir = path.join(artifactsDir, contract.name);\n\n  // Ensure directory exists\n  await fs.mkdir(contractDir, { recursive: true });\n\n  // Write WASM file\n  const wasmPath = path.join(contractDir, `${contract.name}.wasm`);\n  await fs.writeFile(wasmPath, Buffer.from(contract.wasm, 'base64'));\n\n  // Write artifact JSON\n  const artifactPath = path.join(contractDir, `${contract.name}.json`);\n  const artifact = {\n    _format: 'tva-artifact-1',\n    contractName: contract.name,\n    sourceName: contract.sourcePath,\n    abi: contract.abi,\n    spec: contract.spec,\n    wasm: contract.wasm,\n  };\n  await fs.writeFile(artifactPath, JSON.stringify(artifact, null, 2));\n\n  // Update cache\n  const cacheKey = `${hre.config.paths.root}:${contract.name}`;\n  artifactCache.set(cacheKey, {\n    ...contract,\n    wasmPath,\n  });\n}\n\n/**\n * Deletes an artifact\n */\nexport async function deleteArtifact(\n  name: string,\n  hre: HardhatRuntimeEnvironment\n): Promise<void> {\n  const artifactsDir = getArtifactsDir(hre);\n  const contractDir = path.join(artifactsDir, name);\n\n  try {\n    await fs.rm(contractDir, { recursive: true });\n\n    // Clear from cache\n    const cacheKey = `${hre.config.paths.root}:${name}`;\n    artifactCache.delete(cacheKey);\n  } catch {\n    // Artifact doesn't exist\n  }\n}\n\n/**\n * Cleans all artifacts\n */\nexport async function cleanArtifacts(\n  hre: HardhatRuntimeEnvironment\n): Promise<void> {\n  const artifactsDir = getArtifactsDir(hre);\n\n  try {\n    await fs.rm(artifactsDir, { recursive: true });\n  } catch {\n    // Directory doesn't exist\n  }\n\n  clearArtifactCache();\n}\n","/**\n * TVA Hardhat Compilation Task\n *\n * Compiles Solidity contracts using Solang for the Soroban target.\n */\n\nimport { task, subtask } from 'hardhat/config';\nimport { HardhatRuntimeEnvironment } from 'hardhat/types';\nimport * as path from 'path';\nimport * as fs from 'fs/promises';\nimport {\n  SolangCompiler,\n  type CompiledContract,\n} from '@tva-protocol/sdk';\nimport type { TVACompilationResult, TVACompiledContract } from '../config/types.js';\n\n/**\n * Task name constants\n */\nexport const TASK_TVA_COMPILE = 'tva:compile';\nexport const SUBTASK_TVA_COMPILE_GET_SOURCES = 'tva:compile:get-sources';\nexport const SUBTASK_TVA_COMPILE_SOLANG = 'tva:compile:solang';\nexport const SUBTASK_TVA_COMPILE_GENERATE_ARTIFACTS = 'tva:compile:generate-artifacts';\n\n/**\n * Get all Solidity source files\n */\nsubtask(SUBTASK_TVA_COMPILE_GET_SOURCES)\n  .setDescription('Gets all Solidity source files for TVA compilation')\n  .setAction(async (_, hre: HardhatRuntimeEnvironment): Promise<string[]> => {\n    const sourcePaths = hre.config.paths.sources;\n    const sources: string[] = [];\n\n    async function findSolFiles(dir: string): Promise<void> {\n      try {\n        const entries = await fs.readdir(dir, { withFileTypes: true });\n\n        for (const entry of entries) {\n          const fullPath = path.join(dir, entry.name);\n\n          if (entry.isDirectory()) {\n            await findSolFiles(fullPath);\n          } else if (entry.isFile() && entry.name.endsWith('.sol')) {\n            sources.push(fullPath);\n          }\n        }\n      } catch (error) {\n        // Directory doesn't exist or can't be read\n      }\n    }\n\n    await findSolFiles(sourcePaths);\n    return sources;\n  });\n\n/**\n * Compile sources with Solang\n */\nsubtask(SUBTASK_TVA_COMPILE_SOLANG)\n  .setDescription('Compiles Solidity sources using Solang for Soroban')\n  .addParam('sources', 'Array of source file paths')\n  .setAction(async (\n    { sources }: { sources: string[] },\n    hre: HardhatRuntimeEnvironment\n  ): Promise<CompiledContract[]> => {\n    const config = hre.config.tva;\n\n    const compiler = new SolangCompiler({\n      solangPath: config.solangPath || undefined,\n      optimizationLevel: config.optimizationLevel,\n      importPaths: [\n        hre.config.paths.sources,\n        path.join(hre.config.paths.root, 'node_modules'),\n        ...config.importPaths,\n      ],\n    });\n\n    console.log(`Compiling ${sources.length} Solidity file(s) with Solang...`);\n\n    const results: CompiledContract[] = [];\n    const errors: string[] = [];\n\n    for (const sourcePath of sources) {\n      try {\n        console.log(`  Compiling ${path.basename(sourcePath)}...`);\n        const contracts = await compiler.compileFile(sourcePath);\n        results.push(...contracts);\n\n        for (const contract of contracts) {\n          if (contract.warnings.length > 0) {\n            console.log(`    Warnings for ${contract.name}:`);\n            contract.warnings.forEach((w) => console.log(`      ${w}`));\n          }\n        }\n      } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        errors.push(`${sourcePath}: ${message}`);\n        console.error(`  Error compiling ${path.basename(sourcePath)}: ${message}`);\n      }\n    }\n\n    if (errors.length > 0) {\n      console.error(`\\nCompilation failed with ${errors.length} error(s)`);\n    } else {\n      console.log(`\\nCompiled ${results.length} contract(s) successfully`);\n    }\n\n    return results;\n  });\n\n/**\n * Generate Hardhat-compatible artifacts\n */\nsubtask(SUBTASK_TVA_COMPILE_GENERATE_ARTIFACTS)\n  .setDescription('Generates Hardhat-compatible artifacts from compiled contracts')\n  .addParam('contracts', 'Array of compiled contracts')\n  .setAction(async (\n    { contracts }: { contracts: CompiledContract[] },\n    hre: HardhatRuntimeEnvironment\n  ): Promise<TVACompiledContract[]> => {\n    const artifactsDir = path.join(\n      hre.config.paths.root,\n      hre.config.tva.artifactsDir\n    );\n\n    // Ensure artifacts directory exists\n    await fs.mkdir(artifactsDir, { recursive: true });\n\n    const artifacts: TVACompiledContract[] = [];\n\n    for (const contract of contracts) {\n      const contractDir = path.join(artifactsDir, contract.name);\n      await fs.mkdir(contractDir, { recursive: true });\n\n      // Write WASM file\n      const wasmPath = path.join(contractDir, `${contract.name}.wasm`);\n      await fs.writeFile(wasmPath, contract.wasm);\n\n      // Write ABI file (Hardhat-compatible format)\n      const abiPath = path.join(contractDir, `${contract.name}.json`);\n      const abiEntries: any[] = [\n        ...contract.abi.functions.map((f) => ({\n          type: f.type,\n          name: f.name,\n          inputs: f.inputs,\n          outputs: f.outputs,\n          stateMutability: f.stateMutability,\n        })),\n        ...contract.abi.events.map((e) => ({\n          type: 'event',\n          name: e.name,\n          inputs: e.inputs,\n          anonymous: e.anonymous,\n        })),\n        ...contract.abi.errors.map((e) => ({\n          type: 'error',\n          name: e.name,\n          inputs: e.inputs,\n        })),\n      ];\n      const artifact = {\n        _format: 'tva-artifact-1',\n        contractName: contract.name,\n        sourceName: contract.sourcePath,\n        abi: abiEntries,\n        wasm: contract.wasm.toString('base64'),\n        spec: contract.spec,\n        deployedBytecode: '', // Not applicable for WASM\n        bytecode: '', // Not applicable for WASM\n        linkReferences: {},\n        deployedLinkReferences: {},\n      };\n\n      await fs.writeFile(abiPath, JSON.stringify(artifact, null, 2));\n\n      artifacts.push({\n        name: contract.name,\n        sourcePath: contract.sourcePath,\n        wasmPath,\n        wasm: contract.wasm.toString('base64'),\n        abi: artifact.abi,\n        spec: contract.spec,\n      });\n    }\n\n    return artifacts;\n  });\n\n/**\n * Main TVA compile task\n */\ntask(TASK_TVA_COMPILE, 'Compiles Solidity contracts for TVA/Soroban using Solang')\n  .addFlag('force', 'Force recompilation of all contracts')\n  .addFlag('quiet', 'Suppress compilation output')\n  .setAction(async (\n    { force: _force, quiet }: { force: boolean; quiet: boolean },\n    hre: HardhatRuntimeEnvironment\n  ): Promise<TVACompilationResult> => {\n    if (!quiet) {\n      console.log('\\n========================================');\n      console.log('TVA Protocol - Solang Compilation');\n      console.log('========================================\\n');\n    }\n\n    // Get source files\n    const sources = await hre.run(SUBTASK_TVA_COMPILE_GET_SOURCES);\n\n    if (sources.length === 0) {\n      if (!quiet) {\n        console.log('No Solidity files found to compile.');\n      }\n      return {\n        contracts: [],\n        warnings: [],\n        errors: [],\n      };\n    }\n\n    // Compile with Solang\n    const compiledContracts = await hre.run(SUBTASK_TVA_COMPILE_SOLANG, {\n      sources,\n    });\n\n    // Generate artifacts\n    const artifacts = await hre.run(SUBTASK_TVA_COMPILE_GENERATE_ARTIFACTS, {\n      contracts: compiledContracts,\n    });\n\n    // Collect all warnings\n    const warnings: string[] = [];\n    for (const contract of compiledContracts) {\n      warnings.push(...contract.warnings);\n    }\n\n    if (!quiet) {\n      console.log('\\n========================================');\n      console.log(`Artifacts written to: ${hre.config.tva.artifactsDir}`);\n      console.log('========================================\\n');\n    }\n\n    return {\n      contracts: artifacts,\n      warnings,\n      errors: [],\n    };\n  });\n\n/**\n * Override default compile task to also run TVA compilation\n */\ntask('compile', 'Compiles the entire project')\n  .setAction(async (args, hre, runSuper) => {\n    // Run the original compile task\n    await runSuper(args);\n\n    // Also run TVA compilation\n    console.log('\\nRunning TVA compilation...');\n    await hre.run(TASK_TVA_COMPILE, { quiet: args.quiet });\n  });\n","/**\n * TVA Hardhat Deployment Tasks\n *\n * Handles contract deployment to TVA/Soroban networks.\n */\n\nimport { task, subtask } from 'hardhat/config';\nimport { HardhatRuntimeEnvironment } from 'hardhat/types';\nimport * as path from 'path';\nimport * as fs from 'fs/promises';\nimport {\n  ContractDeployer,\n  TVASigner,\n  deriveKeyPairFromMnemonic,\n  deriveKeyPairFromEvmPrivateKey,\n  type NetworkType,\n  type CompiledContract,\n} from '@tva-protocol/sdk';\nimport type { TVAContractFactory, TVAContractInstance } from '../config/types.js';\n\n/**\n * Task name constants\n */\nexport const TASK_TVA_DEPLOY = 'tva:deploy';\nexport const SUBTASK_TVA_GET_SIGNERS = 'tva:get-signers';\nexport const SUBTASK_TVA_GET_CONTRACT_FACTORY = 'tva:get-contract-factory';\n\n/**\n * Get TVA signers from network configuration\n */\nsubtask(SUBTASK_TVA_GET_SIGNERS)\n  .setDescription('Gets TVA signers from network configuration')\n  .setAction(async (_, hre: HardhatRuntimeEnvironment): Promise<TVASigner[]> => {\n    const networkConfig = hre.network.config as any;\n    const accounts = networkConfig.accounts;\n    const networkType = getNetworkType(hre);\n\n    const signers: TVASigner[] = [];\n\n    if (!accounts) {\n      console.warn('No accounts configured for this network');\n      return signers;\n    }\n\n    if (Array.isArray(accounts)) {\n      // Array of private keys or mnemonics\n      for (const account of accounts) {\n        const keyPair = account.startsWith('0x')\n          ? deriveKeyPairFromEvmPrivateKey(account)\n          : await deriveKeyPairFromMnemonic(account);\n\n        signers.push(new TVASigner(keyPair, networkType));\n      }\n    } else if (typeof accounts === 'object' && accounts.mnemonic) {\n      // HD wallet configuration\n      const { mnemonic, initialIndex = 0, count = 10 } = accounts;\n\n      for (let i = initialIndex; i < initialIndex + count; i++) {\n        const keyPair = await deriveKeyPairFromMnemonic(mnemonic, i);\n        signers.push(new TVASigner(keyPair, networkType));\n      }\n    }\n\n    return signers;\n  });\n\n/**\n * Get a contract factory for deployment\n */\nsubtask(SUBTASK_TVA_GET_CONTRACT_FACTORY)\n  .setDescription('Gets a contract factory for deployment')\n  .addParam('name', 'Contract name')\n  .setAction(async (\n    { name }: { name: string },\n    hre: HardhatRuntimeEnvironment\n  ): Promise<TVAContractFactory> => {\n    const artifactsDir = path.join(\n      hre.config.paths.root,\n      hre.config.tva.artifactsDir\n    );\n\n    const contractDir = path.join(artifactsDir, name);\n    const artifactPath = path.join(contractDir, `${name}.json`);\n    const wasmPath = path.join(contractDir, `${name}.wasm`);\n\n    // Check if artifact exists\n    try {\n      await fs.access(artifactPath);\n    } catch {\n      throw new Error(\n        `Contract artifact not found for \"${name}\". ` +\n        `Run \"npx hardhat tva:compile\" first.`\n      );\n    }\n\n    // Load artifact\n    const artifactContent = await fs.readFile(artifactPath, 'utf-8');\n    const artifact = JSON.parse(artifactContent);\n\n    // Load WASM\n    const wasm = await fs.readFile(wasmPath);\n\n    const networkType = getNetworkType(hre);\n    const deployer = new ContractDeployer(networkType);\n\n    // Create factory\n    const factory: TVAContractFactory = {\n      name,\n      abi: artifact.abi,\n\n      async deploy(...args: unknown[]): Promise<TVAContractInstance> {\n        const signers = await hre.run(SUBTASK_TVA_GET_SIGNERS);\n\n        if (signers.length === 0) {\n          throw new Error('No signers available for deployment');\n        }\n\n        const signer = signers[0];\n        console.log(`Deploying ${name} with account: ${signer.evmAddress}`);\n\n        const compiledContract: CompiledContract = {\n          name,\n          wasm,\n          abi: {\n            name,\n            functions: artifact.abi.filter((e: any) => e.type === 'function'),\n            events: artifact.abi.filter((e: any) => e.type === 'event'),\n            errors: artifact.abi.filter((e: any) => e.type === 'error'),\n          },\n          spec: artifact.spec || [],\n          sourcePath: artifact.sourceName,\n          warnings: [],\n        };\n\n        const result = await deployer.deploy(compiledContract, signer, args);\n\n        console.log(`Contract deployed!`);\n        console.log(`  EVM Address: ${result.evmAddress}`);\n        console.log(`  Contract ID: ${result.contractId}`);\n        console.log(`  Tx Hash: ${result.stellarTxHash}`);\n\n        return createContractInstance(\n          name,\n          result.evmAddress,\n          result.contractId,\n          artifact.abi,\n          signer,\n          networkType\n        );\n      },\n\n      attach(address: string): TVAContractInstance {\n        // TODO: Look up contract ID from registry\n        const contractId = `C${'0'.repeat(55)}` as any; // Placeholder\n\n        const signers = hre.run(SUBTASK_TVA_GET_SIGNERS) as any;\n        const signer = signers[0];\n\n        return createContractInstance(\n          name,\n          address as any,\n          contractId,\n          artifact.abi,\n          signer,\n          networkType\n        );\n      },\n    };\n\n    return factory;\n  });\n\n/**\n * Main TVA deploy task\n */\ntask(TASK_TVA_DEPLOY, 'Deploys a contract to TVA/Soroban')\n  .addPositionalParam('contract', 'Contract name to deploy')\n  .addOptionalVariadicPositionalParam('args', 'Constructor arguments', [])\n  .setAction(async (\n    { contract, args }: { contract: string; args: unknown[] },\n    hre: HardhatRuntimeEnvironment\n  ): Promise<TVAContractInstance> => {\n    console.log('\\n========================================');\n    console.log('TVA Protocol - Contract Deployment');\n    console.log('========================================\\n');\n\n    const factory = await hre.run(SUBTASK_TVA_GET_CONTRACT_FACTORY, {\n      name: contract,\n    });\n\n    const instance = await factory.deploy(...args);\n\n    console.log('\\n========================================');\n    console.log('Deployment complete!');\n    console.log('========================================\\n');\n\n    return instance;\n  });\n\n/**\n * Gets the TVA network type from the current Hardhat network\n */\nfunction getNetworkType(hre: HardhatRuntimeEnvironment): NetworkType {\n  const networkName = hre.network.name.toLowerCase();\n\n  if (networkName.includes('mainnet')) {\n    return 'mainnet';\n  } else if (networkName.includes('local') || networkName === 'hardhat') {\n    return 'local';\n  }\n\n  return 'testnet';\n}\n\n/**\n * Creates a contract instance with dynamic methods\n */\nfunction createContractInstance(\n  name: string,\n  address: string,\n  contractId: string,\n  abi: any[],\n  signer: TVASigner,\n  networkType: NetworkType\n): TVAContractInstance {\n  const instance: TVAContractInstance = {\n    address,\n    contractId,\n    abi,\n\n    async waitForDeployment() {\n      // Deployment is already confirmed when we reach here\n      return this;\n    },\n\n    deploymentTransaction() {\n      // TODO: Return deployment transaction details\n      return null;\n    },\n  };\n\n  // Add dynamic methods for each function in the ABI\n  for (const entry of abi) {\n    if (entry.type === 'function') {\n      instance[entry.name] = async (...args: unknown[]) => {\n        // Import TVAContract dynamically to avoid circular deps\n        const { TVAContract } = await import('@tva-protocol/sdk');\n\n        const contract = new TVAContract(\n          contractId as any,\n          {\n            name,\n            functions: abi.filter((e) => e.type === 'function'),\n            events: abi.filter((e) => e.type === 'event'),\n            errors: abi.filter((e) => e.type === 'error'),\n          },\n          networkType\n        );\n\n        const isView =\n          entry.stateMutability === 'view' ||\n          entry.stateMutability === 'pure';\n\n        if (isView) {\n          return contract.call(entry.name, args, signer);\n        } else {\n          return contract.send(entry.name, args, signer);\n        }\n      };\n    }\n  }\n\n  return instance;\n}\n","/**\n * TVA Protocol Hardhat Plugin\n *\n * Enables seamless compilation and deployment of Solidity contracts\n * to TVA/Soroban using the Solang compiler.\n *\n * @packageDocumentation\n */\n\nimport { extendConfig, extendEnvironment } from 'hardhat/config';\nimport { HardhatConfig, HardhatUserConfig } from 'hardhat/types';\nimport {\n  TVASigner,\n  TVAContract,\n  deriveKeyPairFromMnemonic,\n  deriveKeyPairFromEvmPrivateKey,\n  type NetworkType,\n} from '@tva-protocol/sdk';\nimport { resolveTVAConfig } from './config/index.js';\nimport { loadArtifact } from './artifacts/index.js';\nimport type {\n  TVACompilationResult,\n  TVAContractFactory,\n  TVASigner as TVASignerType,\n} from './config/types.js';\n\n// Import tasks\nimport './tasks/compile.js';\nimport './tasks/deploy.js';\n\n// Re-export types\nexport * from './config/types.js';\nexport { tvaNetworks } from './config/index.js';\n\n/**\n * Extend Hardhat config with TVA settings\n */\nextendConfig(\n  (config: HardhatConfig, userConfig: Readonly<HardhatUserConfig>) => {\n    config.tva = resolveTVAConfig(userConfig.tva);\n  }\n);\n\n/**\n * Extend Hardhat runtime environment with TVA functionality\n */\nextendEnvironment((hre) => {\n  const getNetworkType = (): NetworkType => {\n    const networkName = hre.network.name.toLowerCase();\n    if (networkName.includes('mainnet')) return 'mainnet';\n    if (networkName.includes('local') || networkName === 'hardhat') return 'local';\n    return 'testnet';\n  };\n\n  hre.tva = {\n    /**\n     * Compiles all Solidity files using Solang\n     */\n    async compile(): Promise<TVACompilationResult> {\n      return hre.run('tva:compile', { quiet: false });\n    },\n\n    /**\n     * Gets a contract factory for deployment\n     */\n    async getContractFactory(name: string): Promise<TVAContractFactory> {\n      return hre.run('tva:get-contract-factory', { name });\n    },\n\n    /**\n     * Gets a deployed contract instance\n     */\n    async getContractAt(name: string, _address: string) {\n      const artifact = await loadArtifact(name, hre);\n      const networkType = getNetworkType();\n      const signers = await hre.tva.getSigners();\n\n      // For now, use the address as a placeholder contract ID\n      // Real implementation would look up in AccountRegistry\n      const contractId = `C${'0'.repeat(55)}` as any;\n\n      const contract = new TVAContract(\n        contractId,\n        {\n          name: artifact.name,\n          functions: artifact.abi.filter((e: any) => e.type === 'function'),\n          events: artifact.abi.filter((e: any) => e.type === 'event'),\n          errors: artifact.abi.filter((e: any) => e.type === 'error'),\n        },\n        networkType\n      );\n\n      if (signers.length > 0) {\n        return contract.connect(signers[0] as any) as any;\n      }\n\n      return contract as any;\n    },\n\n    /**\n     * Gets the current signer\n     */\n    async getSigner(index = 0): Promise<TVASignerType> {\n      const signers = await hre.tva.getSigners();\n      if (index >= signers.length) {\n        throw new Error(`Signer index ${index} out of range`);\n      }\n      return signers[index];\n    },\n\n    /**\n     * Gets all configured signers\n     */\n    async getSigners(): Promise<TVASignerType[]> {\n      const networkConfig = hre.network.config as any;\n      const accounts = networkConfig.accounts;\n      const networkType = getNetworkType();\n\n      const signers: TVASignerType[] = [];\n\n      if (!accounts) {\n        return signers;\n      }\n\n      if (Array.isArray(accounts)) {\n        for (const account of accounts) {\n          const keyPair = account.startsWith('0x')\n            ? deriveKeyPairFromEvmPrivateKey(account)\n            : await deriveKeyPairFromMnemonic(account);\n\n          const signer = new TVASigner(keyPair, networkType);\n          signers.push({\n            address: signer.evmAddress,\n            stellarAddress: signer.stellarAddress,\n            async signMessage(message: string) {\n              return signer.signMessage(message);\n            },\n            async getBalance() {\n              // Would need RPC connection for real balance\n              return BigInt(0);\n            },\n          });\n        }\n      } else if (typeof accounts === 'object' && accounts.mnemonic) {\n        const { mnemonic, initialIndex = 0, count = 10 } = accounts;\n\n        for (let i = initialIndex; i < initialIndex + count; i++) {\n          const keyPair = await deriveKeyPairFromMnemonic(mnemonic, i);\n          const signer = new TVASigner(keyPair, networkType);\n\n          signers.push({\n            address: signer.evmAddress,\n            stellarAddress: signer.stellarAddress,\n            async signMessage(message: string) {\n              return signer.signMessage(message);\n            },\n            async getBalance() {\n              return BigInt(0);\n            },\n          });\n        }\n      }\n\n      return signers;\n    },\n  };\n});\n\n/**\n * Helper to create a sample hardhat.config.js for TVA\n */\nexport function createSampleConfig(): string {\n  return `\nrequire(\"@tva-protocol/hardhat-plugin\");\n\nmodule.exports = {\n  solidity: \"0.8.24\",\n\n  tva: {\n    // Path to Solang compiler (auto-detected if not specified)\n    // solangPath: \"/path/to/solang\",\n\n    // Optimization level (0-3)\n    optimizationLevel: 2,\n\n    // Default network for deployments\n    defaultNetwork: \"testnet\",\n\n    // Output directory for compiled artifacts\n    artifactsDir: \"artifacts/tva\",\n  },\n\n  networks: {\n    tvaTestnet: {\n      url: \"https://rpc.testnet.tva-protocol.io\",\n      accounts: {\n        mnemonic: \"your mnemonic phrase here\",\n      },\n      tva: {\n        horizonUrl: \"https://horizon-testnet.stellar.org\",\n        sorobanRpcUrl: \"https://soroban-testnet.stellar.org\",\n        networkPassphrase: \"Test SDF Network ; September 2015\",\n        chainId: 0x544541,\n      },\n    },\n    tvaMainnet: {\n      url: \"https://rpc.tva-protocol.io\",\n      accounts: {\n        mnemonic: \"your mnemonic phrase here\",\n      },\n      tva: {\n        horizonUrl: \"https://horizon.stellar.org\",\n        sorobanRpcUrl: \"https://soroban.stellar.org\",\n        networkPassphrase: \"Public Global Stellar Network ; September 2015\",\n        chainId: 0x545641,\n      },\n    },\n  },\n};\n`.trim();\n}\n"]}